$max-width: 640;
$margin: 4;

// Picture width for responsive designs
@mixin picture-width($number_of_pictures) {
	$margin-percentage: percentage($margin * 0.5 /$max-width);
	max-width: ($max-width - ($margin * 2 * $number_of_pictures)) / $number_of_pictures + 0px;
	// max-height: $max-height/$max-width * ($max-width - ($margin * 2 * $number_of_pictures)) / $number_of_pictures + 0px;
	width: percentage(1/$number_of_pictures) - 2 * $margin-percentage;
	margin-left: $margin-percentage;
	margin-right: $margin-percentage;
}

// Pictures from embed images
#main .node > .content div.pictures {
	$number_of_pictures: 2;
	max-width: ($max-width * $number_of_pictures) + 0px;
	text-align: center;
	margin-left: auto;
	margin-right: auto;

	&.panorama {
		max-width: 100%;

		div.picture {
			width: 100%;
			margin-left: 0;
			margin-right: 0;
			margin-top: 1em;
			margin-bottom: 2em;

			img.picture {
				padding-left: 0;
				padding-right: 0;
				border-left: 0;
				border-right: 0;

				@media screen and (max-width: 480px), screen and (max-device-width: 480px) {
					padding-left: 0;
					padding-right: 0;
				}
			}
		}
	}

	div.picture {
		@include picture-width(1);
		display: inline-block;
		vertical-align: top;
		margin-bottom: 1em;
		color: #aaa;
		font-size: 0.85em;

		img.picture {
			background-color: #fff;
			padding: 0.75em;
			box-sizing: border-box;
			border: 1px solid #efefef;
			width: 100%;
			-moz-transition: -moz-transform 0.3s ease;
			-webkit-transition: -webkit-transform 0.3s ease;
			-o-transition: -o-transform 0.3s ease;
			transition: transform 0.3s ease;
			-moz-box-shadow: 0px 0px 10px #eee;
			-webkit-box-shadow: 0px 0px 10px #eee;
			-ms-box-shadow: 0px 0px 10px #eee;
			-o-box-shadow: 0px 0px 10px #eee;
			box-shadow: 0px 0px 10px #eee;

			@media screen and (max-width: 480px), screen and (max-device-width: 480px) {
				padding: 0.25em;
			}
		}

		a.fancybox:hover img.picture {
			-moz-transform: scale(1.02);
			-webkit-transform: scale(1.02);
			-o-transform: scale(1.02);
			transform: scale(1.02);

			@media screen and (max-width: 480px), screen and (max-device-width: 480px) {
				-moz-transform: none;
				-webkit-transform: none;
				-o-transform: none;
				transform: none;
			}			
		}

		p {
			margin: 0.5em auto;
			max-width: 0.4535px*$max-width;
		}

		ul {
			list-style-type: none;
			padding: 0;
			margin-top: 0;
			display: inline;

			li {
				display: inline;
				padding: 0 0.3em;
				margin-left: 0;
				font-size: 0.8235em;
			}
		}

		img.pinit {
			vertical-align: middle;
		}

		&.panorama {
			max-width: 100%;
			display: block;
			margin-left: auto;
			margin-right: auto;
		}

		&.vertical {
			max-width: 0.4535px*$max-width;
		}
	}
}
